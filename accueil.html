<!DOCTYPE html>
<html> 
    <head>
        <meta charset="utf-8">
        <title> Lightning School</title>
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/style.css">
        <script src="js/jquery-3.4.0.min.js"></script>
        <script src="js/js_cookie.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>   
    </head>
    
    <body onLoad="checkCookie();">
        <nav  class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="#">
                <img src="assets/logo.png" width="30" height="30" class="d-inline-block align-top" alt=""> Lightning School
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul id="navbarStudent"  class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Cours <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Classe</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="#">test STUDENT</a>
                    </li>
                </ul>
                <ul id="navbarTeacher" class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="#">Promotion <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Cours</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="#">test TEACHER</a>
                        </li>
                    </ul>
                <form class="form-inline my-2 my-lg-0"></form>
                <p id="nomUserMenu">   </p>
                <button id="profil" class="btn btn-outline-primary my-2 my-sm-0" type="submit">Profil</button>
                <p>__</p>
                <img id="logout" src="assets/logout.png" width="30" height="30" class="d-inline-block align-top" alt="" style="cursor: pointer;">
            </form>
            </div>
        </nav>
        <div  id="test">
        </div>
    </body>
    <script>
        $(document).ready(function(){
            $("#logout").click(function(){
                Cookies.remove('LS_user');
                Cookies.remove('LS_token');
                document.location.href='connexion.html?'
            });
            $("#profil").click(function(){
                document.location.href='profil.html?'         
            });
        });
        
        function checkCookie() {  
            if (typeof $.cookie('LS_user') === 'undefined'){
                alert("no cookie pls get connected ! ");
                window.location="connexion.html?";
            }              
            else if (Cookies.get('LS_user')){
                jsonUser = JSON.parse(Cookies.get('LS_user'));
                var nom =jsonUser["name"];
                var typeUser =jsonUser["userTypeEnum"];
                if(typeUser=="STUDENT"){
                    $('#navbarTeacher').toggle();
                }else{
                    $('#navbarStudent').toggle();
                }
                $('#nomUserMenu').text(nom);
                if (nom==null){
                alert("Première connexion? Aller dans votre profil pour mettre à jours vos informations personelles.");
                }
            } 
        }
    </script>
</html>
    